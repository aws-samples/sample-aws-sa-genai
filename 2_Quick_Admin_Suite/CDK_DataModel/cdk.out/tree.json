{
  "version": "tree-0.1",
  "tree": {
    "id": "App",
    "path": "",
    "children": {
      "Tree": {
        "id": "Tree",
        "path": "Tree",
        "constructInfo": {
          "fqn": "constructs.Construct",
          "version": "10.4.2"
        }
      },
      "QuickAdminSuiteDataModelStack": {
        "id": "QuickAdminSuiteDataModelStack",
        "path": "QuickAdminSuiteDataModelStack",
        "children": {
          "CloudtrailLocation": {
            "id": "CloudtrailLocation",
            "path": "QuickAdminSuiteDataModelStack/CloudtrailLocation",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.44.0"
            }
          },
          "StartDateParameter": {
            "id": "StartDateParameter",
            "path": "QuickAdminSuiteDataModelStack/StartDateParameter",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.44.0"
            }
          },
          "CURSourceTable": {
            "id": "CURSourceTable",
            "path": "QuickAdminSuiteDataModelStack/CURSourceTable",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.44.0"
            }
          },
          "adminconsoledb2025": {
            "id": "adminconsoledb2025",
            "path": "QuickAdminSuiteDataModelStack/adminconsoledb2025",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Database",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseInput": {
                  "name": "admin-console-2025"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnDatabase",
              "version": "2.44.0"
            }
          },
          "groupmembership": {
            "id": "groupmembership",
            "path": "QuickAdminSuiteDataModelStack/groupmembership",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "group and user information which is generated by the etl_job_admin_suite_assets_access glue job",
                  "name": "group_membership",
                  "parameters": {
                    "has_encrypted_data": "false",
                    "classification": "csv",
                    "areColumnsQuoted": "false",
                    "typeOfData": "file",
                    "columnsOrdered": "true",
                    "delimiter": ","
                  },
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "account_id",
                        "comment": "aws account_id",
                        "type": "string"
                      },
                      {
                        "name": "namespace",
                        "comment": "quicksight namespace",
                        "type": "string"
                      },
                      {
                        "name": "group",
                        "comment": "quicksight group",
                        "type": "string"
                      },
                      {
                        "name": "user",
                        "comment": "quicksight user",
                        "type": "string"
                      },
                      {
                        "name": "email",
                        "comment": "email of quicksight user",
                        "type": "string"
                      },
                      {
                        "name": "role",
                        "comment": "role of quicksight user: admin, author, reader",
                        "type": "string"
                      },
                      {
                        "name": "identity_type",
                        "comment": "identity_type of quicksight user: IAM, quicksight",
                        "type": "string"
                      },
                      {
                        "name": "user_arn",
                        "comment": "arn of user",
                        "type": "string"
                      }
                    ],
                    "compressed": false,
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://admin-console-new-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/monitoring/quicksight/group_membership"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "field.delim": ","
                      },
                      "serializationLibrary": "org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe"
                    },
                    "storedAsSubDirectories": false
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "objectaccess": {
            "id": "objectaccess",
            "path": "QuickAdminSuiteDataModelStack/objectaccess",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "objects and access information which is generated by the etl_job_admin_suite_assets_access glue job",
                  "name": "object_access",
                  "parameters": {
                    "has_encrypted_data": "false",
                    "classification": "csv",
                    "areColumnsQuoted": "false",
                    "typeOfData": "file",
                    "columnsOrdered": "true",
                    "delimiter": ","
                  },
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "account_id",
                        "comment": "aws account_id",
                        "type": "string"
                      },
                      {
                        "name": "aws_region",
                        "comment": "aws region name",
                        "type": "string"
                      },
                      {
                        "name": "object_type",
                        "comment": "quicksight object type: dashboard, dataset and etc..",
                        "type": "string"
                      },
                      {
                        "name": "object_name",
                        "comment": "quicksight object name",
                        "type": "string"
                      },
                      {
                        "name": "object_id",
                        "comment": "quicksight object id",
                        "type": "string"
                      },
                      {
                        "name": "principal_type",
                        "comment": "quicksight principal type",
                        "type": "string"
                      },
                      {
                        "name": "principal_name",
                        "comment": "quicksight principal name",
                        "type": "string"
                      },
                      {
                        "name": "arn",
                        "comment": "quicksight principal arn",
                        "type": "string"
                      },
                      {
                        "name": "namespace",
                        "comment": "quicksight namespace",
                        "type": "string"
                      },
                      {
                        "name": "permissions",
                        "comment": "access permissions of quicksight objects: who can do what on a dashboard",
                        "type": "string"
                      }
                    ],
                    "compressed": false,
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://admin-console-new-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/monitoring/quicksight/object_access"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "field.delim": ","
                      },
                      "serializationLibrary": "org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe"
                    },
                    "storedAsSubDirectories": false
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "datasetsproperties": {
            "id": "datasetsproperties",
            "path": "QuickAdminSuiteDataModelStack/datasetsproperties",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "datasets properties information which is generated by the etl_job_admin_suite_ds_properties job",
                  "name": "datasets_properties",
                  "parameters": {
                    "classification": "csv",
                    "skip.header.line.count": "1"
                  },
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "region",
                        "comment": "aws region name",
                        "type": "string"
                      },
                      {
                        "name": "dataset_id",
                        "comment": "dataset id",
                        "type": "string"
                      },
                      {
                        "name": "name",
                        "comment": "dataset name",
                        "type": "string"
                      },
                      {
                        "name": "last_updated_time",
                        "comment": "last updated time",
                        "type": "string"
                      },
                      {
                        "name": "import_mode",
                        "comment": "import mode (SPICE or DIRECT_QUERY)",
                        "type": "string"
                      },
                      {
                        "name": "consumed_spice_capacity_bytes",
                        "comment": "consumed SPICE capacity in bytes",
                        "type": "string"
                      },
                      {
                        "name": "rows_ingested",
                        "comment": "rows ingested",
                        "type": "string"
                      },
                      {
                        "name": "rows_dropped",
                        "comment": "rows dropped",
                        "type": "string"
                      },
                      {
                        "name": "refresh_triggered_time",
                        "comment": "refresh triggered time",
                        "type": "string"
                      },
                      {
                        "name": "refresh_time_seconds",
                        "comment": "refresh time in seconds",
                        "type": "string"
                      },
                      {
                        "name": "request_source",
                        "comment": "request source",
                        "type": "string"
                      },
                      {
                        "name": "request_type",
                        "comment": "request type",
                        "type": "string"
                      },
                      {
                        "name": "ingestion_status",
                        "comment": "ingestion status",
                        "type": "string"
                      },
                      {
                        "name": "error_info_type",
                        "comment": "error info type",
                        "type": "string"
                      },
                      {
                        "name": "error_info_message",
                        "comment": "error info message",
                        "type": "string"
                      },
                      {
                        "name": "principal_type",
                        "comment": "principal type",
                        "type": "string"
                      },
                      {
                        "name": "principal",
                        "comment": "principal name",
                        "type": "string"
                      },
                      {
                        "name": "additional_info",
                        "comment": "additional info",
                        "type": "string"
                      },
                      {
                        "name": "actions",
                        "comment": "actions",
                        "type": "string"
                      },
                      {
                        "name": "is_file",
                        "comment": "is file indicator",
                        "type": "string"
                      }
                    ],
                    "compressed": false,
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://admin-console-new-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/monitoring/quicksight/datasets_properties"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "field.delim": ","
                      },
                      "serializationLibrary": "org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe"
                    },
                    "storedAsSubDirectories": false
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "DatasourcePropertyTable": {
            "id": "DatasourcePropertyTable",
            "path": "QuickAdminSuiteDataModelStack/DatasourcePropertyTable",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": "admin-console-2025",
                "tableInput": {
                  "description": "QuickSight dataset to datasource dependency mapping",
                  "name": "datasource_property",
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "region",
                        "comment": "AWS region",
                        "type": "string"
                      },
                      {
                        "name": "datasource_name",
                        "comment": "data source name",
                        "type": "string"
                      },
                      {
                        "name": "datasource_id",
                        "comment": "data source ID",
                        "type": "string"
                      },
                      {
                        "name": "dataset_name",
                        "comment": "dataset name",
                        "type": "string"
                      },
                      {
                        "name": "datasource_type",
                        "comment": "data source type",
                        "type": "string"
                      },
                      {
                        "name": "dataset_id",
                        "comment": "dataset ID",
                        "type": "string"
                      },
                      {
                        "name": "dataset_last_updated_time",
                        "comment": "dataset last updated time",
                        "type": "string"
                      },
                      {
                        "name": "dataset_created_time",
                        "comment": "dataset created time",
                        "type": "string"
                      }
                    ],
                    "compressed": false,
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://admin-console-new-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/monitoring/quicksight/datasource_property"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "field.delim": ","
                      },
                      "serializationLibrary": "org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe"
                    },
                    "storedAsSubDirectories": false
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "CwQsDsTable": {
            "id": "CwQsDsTable",
            "path": "QuickAdminSuiteDataModelStack/CwQsDsTable",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "CloudWatch Metrics Stream data for QuickSight",
                  "name": {
                    "Fn::Join": [
                      "",
                      [
                        "cw_qs_ds_",
                        {
                          "Ref": "AWS::AccountId"
                        }
                      ]
                    ]
                  },
                  "parameters": {
                    "classification": "json",
                    "partition_filtering.enabled": "true"
                  },
                  "partitionKeys": [
                    {
                      "name": "partition_0",
                      "type": "string"
                    },
                    {
                      "name": "partition_1",
                      "type": "string"
                    },
                    {
                      "name": "partition_2",
                      "type": "string"
                    },
                    {
                      "name": "partition_3",
                      "type": "string"
                    }
                  ],
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "metric_stream_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "account_id",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "region",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "namespace",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "metric_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "dimensions",
                        "comment": "from deserializer",
                        "type": "struct<DatasetId:string>"
                      },
                      {
                        "name": "timestamp",
                        "comment": "from deserializer",
                        "type": "bigint"
                      },
                      {
                        "name": "value",
                        "comment": "from deserializer",
                        "type": "struct<max:double,min:double,sum:double,count:double>"
                      },
                      {
                        "name": "unit",
                        "comment": "from deserializer",
                        "type": "string"
                      }
                    ],
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://cw-qs-ds-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "paths": "account_id,dimensions,metric_name,metric_stream_name,namespace,region,timestamp,unit,value"
                      },
                      "serializationLibrary": "org.openx.data.jsonserde.JsonSerDe"
                    }
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "CwQsDashVisualTable": {
            "id": "CwQsDashVisualTable",
            "path": "QuickAdminSuiteDataModelStack/CwQsDashVisualTable",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "CloudWatch Metrics Stream data for QuickSight Dashboard Visual",
                  "name": {
                    "Fn::Join": [
                      "",
                      [
                        "cw_qs_dash_visual_",
                        {
                          "Ref": "AWS::AccountId"
                        }
                      ]
                    ]
                  },
                  "parameters": {
                    "classification": "json",
                    "partition_filtering.enabled": "true"
                  },
                  "partitionKeys": [
                    {
                      "name": "partition_0",
                      "type": "string"
                    },
                    {
                      "name": "partition_1",
                      "type": "string"
                    },
                    {
                      "name": "partition_2",
                      "type": "string"
                    },
                    {
                      "name": "partition_3",
                      "type": "string"
                    }
                  ],
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "metric_stream_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "account_id",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "region",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "namespace",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "metric_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "dimensions",
                        "comment": "from deserializer",
                        "type": "struct<DashboardId:string,SheetId:string,VisualId:string>"
                      },
                      {
                        "name": "timestamp",
                        "comment": "from deserializer",
                        "type": "bigint"
                      },
                      {
                        "name": "value",
                        "comment": "from deserializer",
                        "type": "struct<max:double,min:double,sum:double,count:double>"
                      },
                      {
                        "name": "unit",
                        "comment": "from deserializer",
                        "type": "string"
                      }
                    ],
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://cw-qs-dash-visual-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "paths": "account_id,dimensions,metric_name,metric_stream_name,namespace,region,timestamp,unit,value"
                      },
                      "serializationLibrary": "org.openx.data.jsonserde.JsonSerDe"
                    }
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "CwQsSpiceTable": {
            "id": "CwQsSpiceTable",
            "path": "QuickAdminSuiteDataModelStack/CwQsSpiceTable",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Table",
              "aws:cdk:cloudformation:props": {
                "catalogId": {
                  "Ref": "AWS::AccountId"
                },
                "databaseName": {
                  "Ref": "adminconsoledb2025"
                },
                "tableInput": {
                  "description": "CloudWatch Metrics Stream data for QuickSight SPICE",
                  "name": {
                    "Fn::Join": [
                      "",
                      [
                        "cw_qs_spice_",
                        {
                          "Ref": "AWS::AccountId"
                        }
                      ]
                    ]
                  },
                  "parameters": {
                    "classification": "json",
                    "partition_filtering.enabled": "true"
                  },
                  "partitionKeys": [
                    {
                      "name": "partition_0",
                      "type": "string"
                    },
                    {
                      "name": "partition_1",
                      "type": "string"
                    },
                    {
                      "name": "partition_2",
                      "type": "string"
                    },
                    {
                      "name": "partition_3",
                      "type": "string"
                    }
                  ],
                  "storageDescriptor": {
                    "columns": [
                      {
                        "name": "metric_stream_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "account_id",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "region",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "namespace",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "metric_name",
                        "comment": "from deserializer",
                        "type": "string"
                      },
                      {
                        "name": "dimensions",
                        "comment": "from deserializer",
                        "type": "struct<AccountId:string>"
                      },
                      {
                        "name": "timestamp",
                        "comment": "from deserializer",
                        "type": "bigint"
                      },
                      {
                        "name": "value",
                        "comment": "from deserializer",
                        "type": "struct<max:double,min:double,sum:double,count:double>"
                      },
                      {
                        "name": "unit",
                        "comment": "from deserializer",
                        "type": "string"
                      }
                    ],
                    "inputFormat": "org.apache.hadoop.mapred.TextInputFormat",
                    "location": {
                      "Fn::Join": [
                        "",
                        [
                          "s3://cw-qs-spice-",
                          {
                            "Ref": "AWS::AccountId"
                          },
                          "/"
                        ]
                      ]
                    },
                    "outputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
                    "serdeInfo": {
                      "parameters": {
                        "paths": "account_id,dimensions,metric_name,metric_stream_name,namespace,region,timestamp,unit,value"
                      },
                      "serializationLibrary": "org.openx.data.jsonserde.JsonSerDe"
                    }
                  },
                  "tableType": "EXTERNAL_TABLE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnTable",
              "version": "2.44.0"
            }
          },
          "CrawlerCwQsDs": {
            "id": "CrawlerCwQsDs",
            "path": "QuickAdminSuiteDataModelStack/CrawlerCwQsDs",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Crawler",
              "aws:cdk:cloudformation:props": {
                "role": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:aws:iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":role/QuickSightAdminConsole2025"
                    ]
                  ]
                },
                "targets": {
                  "s3Targets": [
                    {
                      "path": {
                        "Fn::Join": [
                          "",
                          [
                            "s3://cw-qs-ds-",
                            {
                              "Ref": "AWS::AccountId"
                            },
                            "/"
                          ]
                        ]
                      }
                    }
                  ]
                },
                "configuration": "{\"Version\": 1.0, \"CrawlerOutput\": {\"Partitions\": {\"AddOrUpdateBehavior\": \"InheritFromTable\"}, \"Tables\": {\"AddOrUpdateBehavior\": \"MergeNewColumns\"}}, \"Grouping\": {\"TableGroupingPolicy\": \"CombineCompatibleSchemas\"}, \"CreatePartitionIndex\": true}",
                "databaseName": "admin-console-2025",
                "name": "crawler-cw-qs-ds",
                "recrawlPolicy": {
                  "recrawlBehavior": "CRAWL_EVERYTHING"
                },
                "schemaChangePolicy": {
                  "deleteBehavior": "DEPRECATE_IN_DATABASE",
                  "updateBehavior": "UPDATE_IN_DATABASE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnCrawler",
              "version": "2.44.0"
            }
          },
          "CrawlerCwQsSpice": {
            "id": "CrawlerCwQsSpice",
            "path": "QuickAdminSuiteDataModelStack/CrawlerCwQsSpice",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Crawler",
              "aws:cdk:cloudformation:props": {
                "role": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:aws:iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":role/QuickSightAdminConsole2025"
                    ]
                  ]
                },
                "targets": {
                  "s3Targets": [
                    {
                      "path": {
                        "Fn::Join": [
                          "",
                          [
                            "s3://cw-qs-spice-",
                            {
                              "Ref": "AWS::AccountId"
                            },
                            "/"
                          ]
                        ]
                      }
                    }
                  ]
                },
                "configuration": "{\"Version\": 1.0, \"CrawlerOutput\": {\"Partitions\": {\"AddOrUpdateBehavior\": \"InheritFromTable\"}, \"Tables\": {\"AddOrUpdateBehavior\": \"MergeNewColumns\"}}, \"Grouping\": {\"TableGroupingPolicy\": \"CombineCompatibleSchemas\"}, \"CreatePartitionIndex\": true}",
                "databaseName": "admin-console-2025",
                "name": "crawler-cw-qs-spice",
                "recrawlPolicy": {
                  "recrawlBehavior": "CRAWL_EVERYTHING"
                },
                "schemaChangePolicy": {
                  "deleteBehavior": "DEPRECATE_IN_DATABASE",
                  "updateBehavior": "UPDATE_IN_DATABASE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnCrawler",
              "version": "2.44.0"
            }
          },
          "CrawlerCwQsDashVisual": {
            "id": "CrawlerCwQsDashVisual",
            "path": "QuickAdminSuiteDataModelStack/CrawlerCwQsDashVisual",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Crawler",
              "aws:cdk:cloudformation:props": {
                "role": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:aws:iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":role/QuickSightAdminConsole2025"
                    ]
                  ]
                },
                "targets": {
                  "s3Targets": [
                    {
                      "path": {
                        "Fn::Join": [
                          "",
                          [
                            "s3://cw-qs-dash-visual-",
                            {
                              "Ref": "AWS::AccountId"
                            },
                            "/"
                          ]
                        ]
                      }
                    }
                  ]
                },
                "configuration": "{\"Version\": 1.0, \"CrawlerOutput\": {\"Partitions\": {\"AddOrUpdateBehavior\": \"InheritFromTable\"}, \"Tables\": {\"AddOrUpdateBehavior\": \"MergeNewColumns\"}}, \"Grouping\": {\"TableGroupingPolicy\": \"CombineCompatibleSchemas\"}, \"CreatePartitionIndex\": true}",
                "databaseName": "admin-console-2025",
                "name": "crawler-cw-qs-dash-visual",
                "recrawlPolicy": {
                  "recrawlBehavior": "CRAWL_EVERYTHING"
                },
                "schemaChangePolicy": {
                  "deleteBehavior": "DEPRECATE_IN_DATABASE",
                  "updateBehavior": "UPDATE_IN_DATABASE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnCrawler",
              "version": "2.44.0"
            }
          },
          "CrawlerCwQsDsAddPart": {
            "id": "CrawlerCwQsDsAddPart",
            "path": "QuickAdminSuiteDataModelStack/CrawlerCwQsDsAddPart",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Glue::Crawler",
              "aws:cdk:cloudformation:props": {
                "role": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:aws:iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":role/QuickSightAdminConsole2025"
                    ]
                  ]
                },
                "targets": {
                  "catalogTargets": [
                    {
                      "databaseName": "admin-console-2025",
                      "tables": [
                        {
                          "Fn::Join": [
                            "",
                            [
                              "cw_qs_ds_",
                              {
                                "Ref": "AWS::AccountId"
                              }
                            ]
                          ]
                        }
                      ]
                    }
                  ]
                },
                "configuration": "{\"Version\": 1.0, \"CrawlerOutput\": {\"Partitions\": {\"AddOrUpdateBehavior\": \"InheritFromTable\"}, \"Tables\": {\"AddOrUpdateBehavior\": \"MergeNewColumns\"}}}",
                "databaseName": "admin-console-2025",
                "name": "crawler-cw-qs-ds-add-part",
                "schedule": {
                  "scheduleExpression": "cron(0 * * * ? *)"
                },
                "schemaChangePolicy": {
                  "deleteBehavior": "LOG",
                  "updateBehavior": "UPDATE_IN_DATABASE"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_glue.CfnCrawler",
              "version": "2.44.0"
            }
          },
          "QuickSightCrudEventsView": {
            "id": "QuickSightCrudEventsView",
            "path": "QuickAdminSuiteDataModelStack/QuickSightCrudEventsView",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Athena::NamedQuery",
              "aws:cdk:cloudformation:props": {
                "database": "admin-console-2025",
                "queryString": "CREATE OR REPLACE VIEW quicksight_crud_events AS \nSELECT *\nFROM cloudtrail_logs_pp\nWHERE (\n  eventsource = 'quicksight.amazonaws.com'\n  AND parse_datetime(eventtime, 'yyyy-MM-dd''T''HH:mm:ss''Z') >= (current_timestamp - INTERVAL '40' DAY)\n  AND REGEXP_LIKE(eventname, '^(Create|Update|Delete)')\n)",
                "description": "View for QuickSight CRUD events from CloudTrail logs",
                "name": "quicksight_crud_events_view",
                "workGroup": "primary"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_athena.CfnNamedQuery",
              "version": "2.44.0"
            }
          },
          "QuickSightQueryDbEventsView": {
            "id": "QuickSightQueryDbEventsView",
            "path": "QuickAdminSuiteDataModelStack/QuickSightQueryDbEventsView",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Athena::NamedQuery",
              "aws:cdk:cloudformation:props": {
                "database": "admin-console-2025",
                "queryString": "CREATE OR REPLACE VIEW quicksight_querydb_events AS \nSELECT\n  *\n, JSON_EXTRACT_SCALAR(serviceeventdetails, '$.eventRequestDetails.dataSourceId') datasourceid\n, JSON_EXTRACT_SCALAR(serviceeventdetails, '$.eventRequestDetails.queryId') queryid\n, JSON_EXTRACT_SCALAR(serviceeventdetails, '$.eventRequestDetails.resourceId') dashboard_analysis\n, JSON_EXTRACT_SCALAR(serviceeventdetails, '$.eventRequestDetails.dataSetId') datasetid\n, JSON_EXTRACT_SCALAR(serviceeventdetails, '$.eventRequestDetails.dataSetMode') datasetmode\nFROM cloudtrail_logs_pp\nWHERE ((eventsource = 'quicksight.amazonaws.com') AND (parse_datetime(eventtime, 'yyyy-MM-dd''T''HH:mm:ss''Z') >= (current_timestamp - INTERVAL '40' DAY)) AND (eventname = 'QueryDatabase'))",
                "description": "View for QuickSight QueryDatabase events from CloudTrail logs",
                "name": "quicksight_querydb_events_view",
                "workGroup": "primary"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_athena.CfnNamedQuery",
              "version": "2.44.0"
            }
          },
          "QsUsageCurView": {
            "id": "QsUsageCurView",
            "path": "QuickAdminSuiteDataModelStack/QsUsageCurView",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Athena::NamedQuery",
              "aws:cdk:cloudformation:props": {
                "database": "admin-console-2025",
                "queryString": {
                  "Fn::Join": [
                    "",
                    [
                      "CREATE OR REPLACE VIEW \"qs_usage_cur_vw\" AS \nSELECT\n  bill_payer_account_id\n, line_item_usage_account_id\n, concat(DATE_FORMAT(line_item_usage_start_date, '%Y-%m'), '-01') month_line_item_usage_start_date\n, line_item_usage_type\n, (CASE WHEN (LOWER(line_item_usage_type) LIKE 'qs-user-enterprise%') THEN 'Users - Enterprise' WHEN (LOWER(line_item_usage_type) LIKE 'qs-user-standard%') THEN 'Users - Standard' WHEN (LOWER(line_item_usage_type) LIKE 'qs-reader%') THEN 'Reader Usage' WHEN (LOWER(line_item_usage_type) LIKE '%spice') THEN 'SPICE' WHEN (LOWER(line_item_usage_type) LIKE '%alerts%') THEN 'Alerts' WHEN (LOWER(line_item_usage_type) LIKE '%-q%') THEN 'QuickSight Q' WHEN (LOWER(line_item_usage_type) LIKE '%-report%') THEN 'Paginated Reporting' WHEN (LOWER(line_item_usage_type) LIKE '%-reader-pro%') THEN 'Reader PRO' WHEN (LOWER(line_item_usage_type) LIKE '%-author-pro%') THEN 'Author PRO' WHEN (LOWER(line_item_usage_type) LIKE '%-reader-enterprise%') THEN 'Reader Usage' ELSE line_item_usage_type END) qs_usage_type\n, line_item_line_item_description\n, line_item_line_item_type\n, product['group'] product_group\n, pricing_unit\n, line_item_resource_id\n, product_usagetype\n, line_item_unblended_rate\n, line_item_blended_rate\n, line_item_operation\n, SUM(CAST(line_item_usage_amount AS DOUBLE)) sum_line_item_usage_amount\n, SUM(CAST(line_item_unblended_cost AS DECIMAL(16, 8))) sum_line_item_unblended_cost\n, SUM(CAST(line_item_blended_cost AS DECIMAL(16, 8))) line_item_blended_cost\nFROM ",
                      {
                        "Ref": "CURSourceTable"
                      },
                      "\nWHERE ((product['product_name'] = 'Amazon QuickSight') AND (line_item_line_item_type IN ('DiscountedUsage', 'Usage')))\nGROUP BY bill_payer_account_id, line_item_usage_account_id, DATE_FORMAT(line_item_usage_start_date, '%Y-%m'), 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14\nORDER BY month_line_item_usage_start_date ASC, sum_line_item_unblended_cost DESC, month_line_item_usage_start_date ASC, sum_line_item_unblended_cost DESC"
                    ]
                  ]
                },
                "description": "QuickSight usage and cost analysis view from CUR data",
                "name": "qs_usage_cur_vw",
                "workGroup": "primary"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_athena.CfnNamedQuery",
              "version": "2.44.0"
            }
          },
          "CwQsDsPivotView": {
            "id": "CwQsDsPivotView",
            "path": "QuickAdminSuiteDataModelStack/CwQsDsPivotView",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::Athena::NamedQuery",
              "aws:cdk:cloudformation:props": {
                "database": "admin-console-2025",
                "queryString": {
                  "Fn::Join": [
                    "",
                    [
                      "CREATE OR REPLACE VIEW cw_qs_ds_pivot AS \nSELECT\n  timestamp\n, account_id\n, region\n, dimensions.datasetid datasetid\n, CAST(MAX((CASE WHEN (metric_name = 'IngestionErrorCount') THEN value.sum END)) AS INTEGER) IngestionErrorCount\n, MAX((CASE WHEN (metric_name = 'IngestionErrorCount') THEN unit END)) IngestionErrorCount_Unit\n, CAST(MAX((CASE WHEN (metric_name = 'IngestionInvocationCount') THEN value.sum END)) AS INTEGER) IngestionInvocationCount\n, MAX((CASE WHEN (metric_name = 'IngestionInvocationCount') THEN unit END)) IngestionInvocationCount_Unit\n, CAST(MAX((CASE WHEN (metric_name = 'IngestionLatency') THEN value.sum END)) AS DOUBLE) IngestionLatency\n, MAX((CASE WHEN (metric_name = 'IngestionLatency') THEN unit END)) IngestionLatency_Unit\n, CAST(MAX((CASE WHEN (metric_name = 'IngestionRowCount') THEN value.sum END)) AS INTEGER) IngestionRowCount\n, MAX((CASE WHEN (metric_name = 'IngestionRowCount') THEN unit END)) IngestionRowCount_Unit\nFROM cw_qs_ds_",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      "\nGROUP BY timestamp, account_id, region, dimensions\nORDER BY timestamp ASC, account_id ASC, region ASC"
                    ]
                  ]
                },
                "description": "Pivot view for CloudWatch QuickSight dataset metrics",
                "name": "cw_qs_ds_pivot_view",
                "workGroup": "primary"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_athena.CfnNamedQuery",
              "version": "2.44.0"
            }
          },
          "CDKMetadata": {
            "id": "CDKMetadata",
            "path": "QuickAdminSuiteDataModelStack/CDKMetadata",
            "children": {
              "Default": {
                "id": "Default",
                "path": "QuickAdminSuiteDataModelStack/CDKMetadata/Default",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnResource",
                  "version": "2.44.0"
                }
              },
              "Condition": {
                "id": "Condition",
                "path": "QuickAdminSuiteDataModelStack/CDKMetadata/Condition",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnCondition",
                  "version": "2.44.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "constructs.Construct",
              "version": "10.4.2"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.44.0"
        }
      }
    },
    "constructInfo": {
      "fqn": "aws-cdk-lib.App",
      "version": "2.44.0"
    }
  }
}